<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin url="https://github.com/EarthBuild/earthly-intellij-plugin">
  <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
  <id>dev.EarthBuild.earthly-intellij-plugin</id>

  <!-- Public plugin name should be written in Title Case.
       Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
  <name>EarthBuild</name>

  <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
  <vendor email="support@earthbuild.dev" url="https://earthbuild.dev">earthbuild.dev</vendor>
  <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
       Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
       Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
  <description><![CDATA[
    <p>Adds comprehensive <a href="https://earthbuild.dev">Earthly</a> language support to IntelliJ IDEA and other JetBrains IDEs.</p>
    
    <h3>What is Earthly?</h3>
    <p>Earthly is a build automation tool that combines the best of Makefiles and Dockerfiles. It provides reproducible builds that run anywhere - on your laptop, in CI/CD, or in production.</p>
    
    <h3>Key Features</h3>
    <ul>
      <li><b>Syntax Highlighting</b> - Full syntax highlighting for all Earthly commands and keywords</li>
      <li><b>Code Navigation</b> - Go to Definition (Ctrl/Cmd+Click) and Find Usages for targets and functions</li>
      <li><b>Code Completion</b> - Intelligent suggestions for target references and function calls</li>
      <li><b>Editor Support</b> - Comment/uncomment lines, automatic file type detection</li>
      <li><b>Refactoring</b> - Safe delete for targets and functions with reference validation</li>
    </ul>
    
    <h3>Supported File Types</h3>
    <ul>
      <li>Earthfile (standard name)</li>
      <li>*.earth files</li>
      <li>*.earthly files</li>
    </ul>
    
    <h3>Getting Started</h3>
    <p>Once installed, the plugin automatically recognizes Earthfile and *.earth files. Use Ctrl/Cmd+Click to navigate to target definitions, and Ctrl/Cmd+/ to comment lines.</p>
    
    <h3>Links</h3>
    <ul>
      <li><a href="https://docs.earthly.dev">Earthly Documentation</a></li>
      <li><a href="https://github.com/EarthBuild/earthly-intellij-plugin/issues">Report Issues</a></li>
      <li><a href="https://github.com/EarthBuild/earthly-intellij-plugin">Source Code</a></li>
    </ul>

    <br>
    <p><i>This plugin is a community fork of the original Earthly organization plugin, updated for compatibility with the latest IntelliJ platform.</i></p>
  ]]></description>


  <change-notes><![CDATA[
    <h3>Version 1.0.2 (2025-08-01)</h3>
    <h4>Added</h4>
    <ul>
      <li>Enhanced plugin description with comprehensive feature documentation</li>
      <li>Detailed change notes for better version tracking</li>
      <li>Demo Earthfile for documentation and screenshots</li>
    </ul>
    
    <h3>Version 1.0.1 (2025-08-01)</h3>
    <h4>Fixed</h4>
    <ul>
      <li>Resolved version conflict for marketplace upload</li>
      <li>Fixed 7 warnings about optional plugin dependencies by adding proper config-file attributes</li>
      <li>Added Kotlin plugin compatibility mode support (K1 and K2)</li>
    </ul>
    <h4>Added</h4>
    <ul>
      <li>Configuration files for optional dependencies (Java, Kotlin, PHP, Ruby, Python, Go)</li>
    </ul>
    
    <h3>Version 1.0.0 (2025-07-31)</h3>
    <h4>Added</h4>
    <ul>
      <li>Full support for IntelliJ Platform 2025.1.3</li>
      <li>Support for IntelliJ Platform builds 232 through 251.*</li>
      <li>Migrated to IntelliJ Platform Gradle Plugin 2.6.0</li>
      <li>Community fork of the original Earthly organization plugin</li>
    </ul>
    <h4>Changed</h4>
    <ul>
      <li>Updated minimum IntelliJ version to 2023.2 (build 232)</li>
      <li>Migrated from deprecated IntelliJ Platform Plugin 1.x to 2.x</li>
      <li>Updated test infrastructure for compatibility with new platform APIs</li>
    </ul>
    <h4>Fixed</h4>
    <ul>
      <li>Parser tests now compatible with new TextMate scope format</li>
      <li>Resolved compilation warnings except TextMate API deprecations</li>
      <li>Fixed StringUtils deprecation by migrating to IntelliJ's StringUtil</li>
    </ul>
    
    <p>For full changelog, see <a href="https://github.com/EarthBuild/earthly-intellij-plugin/blob/main/CHANGELOG.md">CHANGELOG.md</a></p>
  ]]></change-notes>

  <!-- Product and plugin compatibility requirements.
       Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
  <depends>com.intellij.modules.platform</depends>
  <depends>org.jetbrains.plugins.textmate</depends>
  <depends optional="true" config-file="earthly-java.xml">com.intellij.java</depends>
  <depends optional="true" config-file="earthly-kotlin.xml">org.jetbrains.kotlin</depends>
  <depends optional="true" config-file="earthly-php.xml">com.jetbrains.php</depends>
  <depends optional="true" config-file="earthly-ruby.xml">com.intellij.modules.ruby</depends>
  <depends optional="true" config-file="earthly-python.xml">com.intellij.modules.python</depends>
  <depends optional="true" config-file="earthly-go.xml">org.jetbrains.plugins.go</depends>

  <!-- Kotlin plugin compatibility mode -->
  <extensions defaultExtensionNs="org.jetbrains.kotlin">
    <supportsKotlinPluginMode supportsK1="true" supportsK2="true"/>
  </extensions>

  <!-- Extension points defined by the plugin.
       Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
  <extensions defaultExtensionNs="com.intellij">
    <fileType
      name="Earthfile"
      implementationClass="dev.earthly.plugin.metadata.EarthlyFileType"
      fieldName="INSTANCE"
      language="Earthly"
      patterns="Earthfile;*.earth;*.earthly;*.Earthfile"/>
    <editorHighlighterProvider filetype="Earthfile" implementationClass="dev.earthly.plugin.language.syntax.highlighting.EarthlyEditorHighlighterProvider"/>
    <lang.parserDefinition language="Earthly" implementationClass="dev.earthly.plugin.language.syntax.parser.EarthlyParserDefinition"/>
    <lang.commenter language="Earthly" implementationClass="dev.earthly.plugin.language.syntax.commenter.EarthlyCommenter"/>
    <lang.findUsagesProvider language="Earthly" implementationClass="dev.earthly.plugin.language.syntax.EarthlyFindUsagesProvider"/>
    <lang.refactoringSupport language="Earthly" implementationClass="dev.earthly.plugin.language.syntax.EarthlyRefactoringSupportProvider"/>
<!--    <codeInsight.lineMarkerProvider language="Earthly" implementationClass="dev.earthly.plugin.language.syntax.EarthlyLineMarkerProvider"/>-->
    <psi.referenceContributor language="Earthly" implementation="dev.earthly.plugin.language.syntax.EarthlyReferenceContributor"/>
    <completion.contributor language="Earthly" implementationClass="dev.earthly.plugin.language.syntax.EarthlyCompletionContributor"/>
    <lang.namesValidator language="Earthly" implementationClass="dev.earthly.plugin.language.syntax.EarthlyNamesValidator"/>

  </extensions>
</idea-plugin>
